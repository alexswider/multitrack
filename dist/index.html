<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>MULTI TRACK</title>
    <title>Socket.IO chat</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="flash">
        <object id="flashcontent" name="flashcontent" flashvars="roomID=666" type="application/x-shockwave-flash" data="swf/main.swf" width="80%" height="100%">
            <param name="movie" value="swf/main.swf" />
            <param name="quality" value="high" />
            <param name='flashvars' value='roomID=666'/>
            <param name="allowscriptaccess" value="always" />
            <a href="http://www.adobe.com/go/getflash">
                <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
            </a>
        </object>
    </div>
    <div id="right">
        <ul id="messages"></ul>
        <form action="">
            <input id="m" autocomplete="off" />
            <button>Send</button>
        </form>
    </div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
    var socket = io();
    $('form').submit(function() {
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
    });
    socket.on('chat message', function(msg) {
        $('#messages').append($('<li>').text(msg));
    });
    socket.on("connect", function(){
        socket.emit('user_join', "Bob");
        console.log("connected");
    });

    socket.on("user_join", function(){
        console.log("userJoined:");
        document.getElementById("flashcontent").UserJoined();
    });
    </script>
</body>

</html>
